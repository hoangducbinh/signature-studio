<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tách nền chữ ký</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32.png" />
  <link rel="icon" type="image/svg+xml" href="./images/icon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="description" content="Công cụ tách nền & chỉnh sửa chữ ký online miễn phí. Tách nền chữ ký từ ảnh chụp, chỉnh nét và đổi màu." />
  <meta name="keywords" content="tách nền chữ ký, chỉnh sửa chữ ký, công cụ chữ ký online" />
  <meta name="author" content="hoangducbinh.prod" />
  <meta property="og:title" content="Tách nền chữ ký" />
  <meta property="og:description" content="Công cụ tách nền & chỉnh sửa chữ ký online miễn phí" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="#" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="body-bg">
  <header class="container header">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 16c4-3 6-7 9-7 3 0 3 4 6 4 2 0 3-1 3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M3 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="brand-text">
        <h1 class="app-title">Signature Studio</h1>
        <p class="app-tagline">Tách nền, chỉnh nét & đổi màu chữ ký</p>
      </div>
    </div>
  </header>

  <main class="container main">
    <section class="layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <nav class="nav-group" aria-label="Điều hướng">
          <button class="nav-btn active" data-target="upload">
            <span class="nav-dot"></span><span>Tải ảnh</span>
          </button>
          <button class="nav-btn" data-target="settings">
            <span class="nav-dot"></span><span>Chỉnh sửa</span>
          </button>
        </nav>

        <div class="panel-group">
          <div id="panel-upload" class="panel card">
            <h3 class="subsection-title">Tải ảnh</h3>
            <div class="input-group">
              <label for="fileInput" class="file-label">Chọn ảnh chữ ký</label>
              <input id="fileInput" type="file" accept="image/*" />
              <p class="hint">Chụp trên giấy trắng, ánh sáng đều, nét ký đậm để có kết quả tốt.</p>
              <div class="btn-row">
                <button id="resetBtn" class="btn btn-secondary">Làm mới</button>
              </div>
            </div>
          </div>

          <div id="panel-settings" class="panel card hidden">
            <h3 class="subsection-title">Chỉnh sửa</h3>
            <div class="input-group">
              <div class="field">
                <div class="field-top">
                  <label class="label">Ngưỡng tách nền</label>
                  <div class="muted">Tự động (Otsu)</div>
                </div>
                <input id="thresh" class="hidden" type="range" min="0" max="255" value="128" />
                <div class="muted hidden">Giá trị: <span id="threshVal" class="bold">128</span></div>
              </div>

              <div class="field">
                <div class="field-top">
                  <label class="label">Độ dày nét</label>
                  <input id="strokeNum" type="number" value="0" min="-5" max="5" step="0.5" class="number" />
                </div>
                <input id="stroke" type="range" min="-5" max="5" value="0" step="0.5" />
                <div class="muted">Mỏng ⟵ <span id="strokeVal" class="bold">0</span> ⟶ Đậm</div>
              </div>

              <div class="field">
                <div class="field-top">
                  <label class="label">Màu chữ ký</label>
                  <div class="color-stack">
                    <input id="color" type="color" value="#0000FF" class="color" />
                    <input id="colorHex" type="text" value="#0000FF" placeholder="#000000" maxlength="7" class="hex" />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Xuất ảnh: 1 NÚT DUY NHẤT, luôn hiển thị -->
          <div class="card">
            <h3 class="subsection-title">Xuất ảnh</h3>
            <div class="input-group">
              <button id="exportBtn" class="btn btn-primary full">Xuất PNG</button>
            </div>
          </div>
        </div>
      </aside>

      <!-- Preview area -->
      <div class="stage">
        <div class="canvas-wrap card">
          <div class="canvas-header">Ảnh gốc</div>
          <div class="canvas-body checker">
            <canvas id="origCanvas"></canvas>
          </div>
        </div>
        <div class="canvas-wrap card">
          <div class="canvas-header">Kết quả (xem trước)</div>
          <div class="canvas-body checker">
            <canvas id="outCanvas"></canvas>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- <footer class="container footer">
    <p class="muted small">© 2025 hoangducbinh.prod · <a href="https://github.com/hoangducbinh" target="_blank" rel="noopener noreferrer">GitHub</a></p>
  </footer> -->

  <div id="loadingModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Đang xử lý ảnh">
    <div class="modal-content">
      <div class="loader" aria-hidden="true"></div>
      <p class="loading-text">Đang xử lý ảnh...</p>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>