<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Signature Studio ‚Äî T√°ch n·ªÅn & ch·ªânh m√†u n√©t k√Ω</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .checker {
      background-image: linear-gradient(45deg, #e5e7eb 25%, transparent 25%),
                        linear-gradient(-45deg, #e5e7eb 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #e5e7eb 75%),
                        linear-gradient(-45deg, transparent 75%, #e5e7eb 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    }
    input[type="range"] { 
      accent-color: #3b82f6; 
      height: 6px;
      border-radius: 3px;
    }
    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      height: 18px;
      width: 18px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .btn { 
      padding: 0.75rem 1rem; 
      border-radius: 0.75rem; 
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); 
      border: 1px solid #d1d5db; 
      font-size: 0.875rem; 
      font-weight: 500; 
      transition: all 0.2s ease;
    }
    .btn-primary { 
      background-color: #3b82f6; 
      color: white; 
      box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    }
    .btn-primary:hover { 
      background-color: #2563eb; 
      box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.2);
      transform: translateY(-1px);
    }
    .btn-ghost { 
      background-color: transparent;
      color: #374151;
    }
    .btn-ghost:hover { 
      background-color: #f9fafb; 
      border-color: #d1d5db;
    }
    .btn-secondary {
      background-color: #f3f4f6;
      color: #374151;
      border-color: #d1d5db;
    }
    .btn-secondary:hover {
      background-color: #e5e7eb;
    }
    .label { 
      font-size: 0.75rem; 
      font-weight: 600;
      text-transform: uppercase; 
      letter-spacing: 0.05em; 
      color: #4b5563; 
      margin-bottom: 0.5rem;
      display: block;
    }
    .card {
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      transition: box-shadow 0.2s ease;
    }
    .card:hover {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .control-group {
      padding: 1.25rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      background-color: white;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    }
    .canvas-container {
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    }
    .canvas-header {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #f3f4f6;
      background-color: #f9fafb;
      font-size: 0.875rem;
      font-weight: 500;
      color: #374151;
    }
    .canvas-body {
      background-image: linear-gradient(45deg, #e5e7eb 25%, transparent 25%),
                        linear-gradient(-45deg, #e5e7eb 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #e5e7eb 75%),
                        linear-gradient(-45deg, transparent 75%, #e5e7eb 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 320px;
      padding: 1rem;
    }
    .section-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 1rem;
    }
    .subsection-title {
      font-size: 0.875rem;
      font-weight: 500;
      color: #374151;
      margin-bottom: 0.75rem;
    }
    .tooltip {
      font-size: 0.75rem;
      color: #6b7280;
      margin-top: 0.25rem;
      line-height: 1.5;
    }
    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 0.125rem 0.625rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .status-active {
      background-color: #dcfce7;
      color: #166534;
    }
    .status-inactive {
      background-color: #f3f4f6;
      color: #4b5563;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 text-gray-900 min-h-screen">
  <header class="max-w-7xl mx-auto px-6 py-8">
    <div class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
        <span style="color: #3b82f6;">‚úçÔ∏è</span> Signature Studio
      </h1>
      <p class="text-gray-600 text-lg max-w-3xl mx-auto leading-relaxed">
        T√°ch n·ªÅn ch·ªØ k√Ω t·ª´ ·∫£nh ch·ª•p, ch·ªânh n√©t (anti‚Äëalias + supersample), ƒë·ªïi m√†u ch·ªØ k√Ω
      </p>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-6 pb-24">
    <section class="grid lg:grid-cols-3 gap-8 items-start">
      <div class="lg:col-span-1 space-y-6">
        <div class="control-group">
          <h3 class="subsection-title">üìÅ T·∫£i ·∫£nh ch·ªØ k√Ω</h3>
          <div class="input-group">
            <input id="fileInput" type="file" accept="image/*" style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background-color: white; transition: border-color 0.2s ease;" />
            <p class="tooltip">üí° Tip: Ch·ª•p tr√™n gi·∫•y tr·∫Øng, √°nh s√°ng ƒë·ªÅu, n√©t k√Ω ƒë·∫≠m ƒë·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t.</p>
          </div>
        </div>

        <div class="control-group">
          <h3 class="subsection-title">‚öôÔ∏è C√†i ƒë·∫∑t x·ª≠ l√Ω</h3>
          <div class="input-group">
            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="label">Ng∆∞·ª°ng t√°ch n·ªÅn</label>
                <label class="inline-flex items-center gap-2 text-xs" style="background-color: #eff6ff; padding: 0.25rem 0.5rem; border-radius: 0.375rem;">
                  <input id="autoOtsu" type="checkbox" class="mr-1" checked /> Auto (Otsu)
                </label>
              </div>
              <input id="thresh" type="range" min="0" max="255" value="128" style="width: 100%;" />
              <div class="text-xs text-gray-500 mt-1">Gi√° tr·ªã: <span id="threshVal" style="font-weight: 500;">128</span></div>
            </div>

            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="label">ƒê·ªô d√†y n√©t</label>
                <input id="strokeNum" type="number" value="0" min="-5" max="5" step="0.5" style="width: 4rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;" />
              </div>
              <input id="stroke" type="range" min="-5" max="5" value="0" step="0.5" style="width: 100%;" />
              <div class="text-xs text-gray-500 mt-1">M·ªèng ‚üµ <span id="strokeVal" style="font-weight: 500;">0</span> ‚ü∂ ƒê·∫≠m</div>
            </div>

            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="label">M√†u ch·ªØ k√Ω</label>
                <div class="flex items-center gap-2">
                  <input id="color" type="color" value="#0000FF" style="width: 2.5rem; height: 2rem; border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 0; cursor: pointer;" />
                  <input id="colorHex" type="text" value="#0000FF" placeholder="#000000" style="width: 5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;" maxlength="7" />
                </div>
              </div>
            </div>

            <div>
              <label class="label">Scale (k√≠ch th∆∞·ªõc xu·∫•t)</label>
              <input id="scale" type="range" min="0.25" max="3" step="0.05" value="1" style="width: 100%;" />
              <div class="text-xs text-gray-500 mt-1"><span id="scaleVal" style="font-weight: 500;">1.00√ó</span></div>
            </div>

            <div class="flex gap-3 pt-4">
              <button id="processBtn" class="btn btn-primary" style="flex: 1;">üéØ T√°ch n·ªÅn</button>
              <button id="resetBtn" class="btn btn-secondary">üîÑ Reset</button>
              <button id="resetAllBtn" class="btn btn-secondary hidden">üîÑ Reset t·∫•t c·∫£</button>
            </div>
          </div>
        </div>

        <div class="control-group">
          <h3 class="subsection-title">üé® Ch·ªânh s·ª≠a v√πng</h3>
          <div class="input-group">
            <div>
              <div class="flex items-center justify-between mb-3">
                <label class="label">Ch·ªçn v√πng ch·ªânh s·ª≠a</label>
                <button id="selectModeBtn" class="btn btn-secondary text-xs">üñ±Ô∏è Ch·ªçn v√πng</button>
              </div>
              <div id="selectionTools" class="space-y-3 hidden">
                <div class="flex gap-2">
                  <button id="rectSelectBtn" class="btn btn-secondary text-xs" style="flex: 1;">üìê H√¨nh ch·ªØ nh·∫≠t</button>
                  <button id="brushSelectBtn" class="btn btn-secondary text-xs" style="flex: 1;">üñåÔ∏è C·ªç v·∫Ω</button>
                </div>
                <div class="flex gap-3 items-center">
                  <label class="text-xs text-gray-600">K√≠ch th∆∞·ªõc c·ªç:</label>
                  <input id="brushSize" type="range" min="5" max="50" value="15" style="flex: 1;" />
                  <span class="text-xs text-gray-500" style="width: 3rem; text-align: center; font-weight: 500;"><span id="brushSizeVal">15</span>px</span>
                </div>
              </div>
            </div>
            
            <div id="regionControls" class="space-y-3 hidden">
              <div style="padding: 0.75rem; background-color: #eff6ff; border-radius: 0.5rem; border: 1px solid #bfdbfe;">
                <div class="flex items-center justify-between mb-2">
                  <label class="label">M√†u v√πng ch·ªçn</label>
                  <div class="flex items-center gap-2">
                    <input id="regionColor" type="color" value="#0000FF" style="width: 2rem; height: 1.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 0; cursor: pointer;" />
                    <input id="regionColorHex" type="text" value="#0000FF" placeholder="#000000" style="width: 4rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;" maxlength="7" />
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <label class="label">ƒê·ªô d√†y v√πng ch·ªçn</label>
                  <input id="regionStroke" type="number" value="0" min="-3" max="3" step="0.5" style="width: 4rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;" />
                </div>
                <div class="flex gap-2 mt-3">
                  <button id="applyRegionBtn" class="btn btn-primary text-xs" style="flex: 1;">‚úÖ √Åp d·ª•ng</button>
                  <button id="clearRegionBtn" class="btn btn-secondary text-xs" style="flex: 1;">‚ùå X√≥a v√πng</button>
                </div>
                <div class="flex gap-2 mt-2">
                  <button id="resetRegionBtn" class="btn btn-secondary text-xs" style="flex: 1;">üîÑ Reset v√πng</button>
                </div>
              </div>
            </div>
            
            <div style="padding-top: 1rem; border-top: 1px solid #e5e7eb;">
              <button id="exportBtn" class="btn btn-primary" style="width: 100%;">‚¨áÔ∏è Xu·∫•t PNG n·ªÅn trong</button>
              <p class="tooltip">PNG s·∫Ω ƒë∆∞·ª£c crop s√°t n√©t k√Ω, n·ªÅn trong su·ªët, m√†u theo ch·ªçn.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="lg:col-span-2 grid md:grid-cols-2 gap-6">
        <div class="canvas-container">
          <div class="canvas-header">üì∑ ·∫¢nh g·ªëc</div>
          <div class="canvas-body">
            <canvas id="origCanvas" style="max-width: 100%; max-height: 100%; object-fit: contain;"></canvas>
          </div>
        </div>
        <div class="canvas-container">
          <div class="canvas-header">‚ú® K·∫øt qu·∫£ (preview)</div>
          <div class="canvas-body">
            <canvas id="outCanvas" style="max-width: 100%; max-height: 100%; object-fit: contain;"></canvas>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-7xl mx-auto px-6 py-8 text-center">
    <div style="border-top: 1px solid #e5e7eb; padding-top: 2rem;">
      <p class="text-sm text-gray-500">¬© 2025 Signature Studio.</p>
    </div>
  </footer>

<script src="./script.js"></script>
</body>
</html>